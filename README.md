# Item Validation for SuperMereo Type-Level Annotation

This repository contains materials, data, and analysis code for the
item validation system developed for SuperMereo type-level annotation.

## Getting Started

First, download the code:

```bash
git clone https://github.com/SuperMereo/item-validation.git
```

Then, build the Docker image:

```bash
cd item-validation
docker build -t supermereo-item-validation .
```

Finally, run a container based on the image, ensuring access to the
current directory.

```bash
docker run -it --rm --user $(id -u):$(id -g) --group-add users -v "$(pwd)":/home/jovyan -p 8888:8888 supermereo-item-validation
```

## Repo structure
```
.
├── data
├── scripts
│   ├── analysis
│   └── generation
|       ├── sense-generation
│       └── sentence-generation
├── survey_materials
|   ├── sentences
│   ├── task_instructions
│   └── scripts
└── results

```

### Data
- This folder contains data lightly processed for the purposes of anonymization and readability. Each row details one annotation instance.

### Results
- This folder contains figures generated by our analyses scripts.

### Scripts
- This folder contains scripts to both perform statistical analyses on our raw data and to generate the experimental items.
#### analysis
- These scripts process raw data into a more desirable format, and performs statistical analyses on such preprocessed data.
#### generation
- Our generation process is seperated into two parts: generating senses using an LLM, and generating sentences using the aforementioned LLM-generated senses as well as Propbank's sense inventory.
##### sense-generation
- This folder contains a bash script that prompts Llama to differentiate between monsemous and polysemous verbs and then generate sense descriptions conditioned on the previous result. All prompting procedures are done with a number of variations between system prompt, instructions, and temperature, and the final interpretation is finalized based on various metrics such as comparing to Propbank's distribution and fitting a predictive model. 
##### sentence-generation
- This folder contains a python script that generates sentences conditioned on a sense description. **Note: If you are interested in using our methodology for generating linguistic stimuli, please refer to our [stimulus generator package](https://github.com/SuperMereo/stimulus-sampler) instead.**
##### materials
- This folder contains project-specific csv files used in our generation process, such as a variety of prompts using at each step of our generation process, as well as the list of verbs used.

### Survey_materials
- This folder contains the materials needed to construct our experiments.
#### sentences
- This folder contains the sentences generated via our four generation methods (LLM sentences with LLM senses, LLM sentences with Propbank senses, corpus sentences with Propbank senses, and manually).
#### survey_instructions
- These files contain the plain text versions of instructions used in our experiments.
#### scripts
- These scripts are used to format test items into lists, intertwined with select calibration items, in order to be inserted into Qualtrics surveys.
